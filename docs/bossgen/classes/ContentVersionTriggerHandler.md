---
layout: default
title: ContentVersionTriggerHandler
parent: classes
---
# Metadata Type
classes


# Filename 
ContentVersionTriggerHandler


# Raw XML
```
public without sharing class ContentVersionTriggerHandler {
  //--------------------Handler Methods----------------------
  public static void afterInsertActions(
    Map<Id, ContentVersion> contentVersionsMap
  ) {
    populateCongaFields(contentVersionsMap);
  }
  //--------------------End Handler Methods------------------
  //--------------------Methods For After Trigger----------------------
  //This method is used for updating the title of content documents generated by Conga.
  public static void populateCongaFields(
    Map<Id, ContentVersion> contentVersionsMap
  ) {
    Set<Id> congaDocumentIds = new Set<Id>();
    List<ContentDocument> congaDocumentsToUpdate = new List<ContentDocument>();
    for (ContentVersion contentVersion : contentVersionsMap.values()) {
      if (contentVersion.IsLatest)
        congaDocumentIds.add(contentVersion.ContentDocumentId);
    }
    for (ContentDocument contentDocument : [
      SELECT id, Title
      FROM ContentDocument
      WHERE id IN :congaDocumentIds
    ]) {
      if (
        (contentDocument.Title.containsIgnoreCase('Rate Agreement') ||
        contentDocument.Title.containsIgnoreCase('Housing Contract') ||
        contentDocument.Title.containsIgnoreCase('Contract To Client') ||
        contentDocument.Title.containsIgnoreCase('Final Contract') ||
        contentDocument.Title.containsIgnoreCase('PickUp Report') ||
        contentDocument.Title.containsIgnoreCase('Transportation Contract') ||
        contentDocument.Title.containsIgnoreCase('Air Options') ||
        contentDocument.Title.containsIgnoreCase('Final Choice') ||
        contentDocument.Title.containsIgnoreCase('Ticketed Confirmation') ||
        contentDocument.Title.containsIgnoreCase('Air Email Confirmation')) &&
        contentDocument.Title.endsWithIgnoreCase('.pdf')
      ) {
        congaDocumentsToUpdate.add(
          new ContentDocument(
            id = contentDocument.id,
            Title = contentDocument.Title.subStringBefore('.pdf')
          )
        );
      }
    }
    try {
      if (!congaDocumentsToUpdate.isEmpty())
        update congaDocumentsToUpdate;
    } catch (DmlException e) {
      System.debug(
        'ContentVersionTriggerHandlerHandler.populateFields() - DmlException: ' +
        e.getMessage()
      );
    }
  }
  //--------------------End Methods For After Trigger-----------
}
```


# Last Modified


# Usage
